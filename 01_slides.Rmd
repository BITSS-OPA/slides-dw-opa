---
title: "An Open Policy Analysis for Deworming Interventions"
subtitle: "BITSS Annual Meeting"
author: "Fernando Hoces, BITSS"
date:  "`r format(as.Date('2021-01-07'), '%d %B %Y')` | [slides](https://github.com/BITSS-OPA/slides-dw-opa)"
output: 
  xaringan::moon_reader:
    footer: "These slides available at https://github.com/BITSS-OPA/slides-dw-opa"
    css: [default, metropolis, metropolis-fonts] 
    lib_dir: libs
    nature:
      ratio: '16:9'
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
#      slideNumberFormat: |
#          <div class="progress-bar" style="width: calc(%current% / %total% * 100%);">
editor_options: 

  chunk_output_type: console
---
count: false
background-image: url("Images/BITSSlogo.png"), url(Images/cega.png)
background-size: 600px, 200px
background-position: 50% 10% , 100% 95% 
name: about-bitss

<style>

.center2 {
  margin: 0;
  position: absolute;
  top: 50%;
  left: 50%;
  -ms-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
}


pre.sourceCode {
    max-height: 200px;
    overflow-y: auto;
}


/*
.remark-slide-number {
  position: inherit;
}

.remark-slide-number .progress-bar-container {
  position: absolute;
  bottom: 0;
  height: 4px;
  display: block;
  left: 0;
  right: 0;
}

.remark-slide-number .progress-bar {
  height: 100%;
  background-color: blue;
}
*/
</style>



```{css, echo=FALSE}
# CSS for including pauses in printed PDF output (see bottom of lecture)
@media print {
  .has-continuation {
    display: block !important;
  }
}

```


```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
library(knitr)
opts_chunk$set(
  fig.align="center",  
  fig.height=4, #fig.width=6,
  # out.width="748px", #out.length="520.75px",
  dpi=300, #fig.path='Figs/',
  cache=T ,#, 
  echo=F #warning=F, message=F
  )
library(tidyverse)
library(hrbrthemes)
library(fontawesome)

```


# Credits
  
  


.pull-left[
<br><br>

**Core BITSS Team**  
 Aleks Bogdanoski  
 Fernando Hoces  
 Katie Hoeberling  
 Teng Aleksandra Ma  
 Edward Miguel 
 
**Undergraduate RAs**  
Sophia Bai  
Orianna Jia  
 
]
.pull-right[ .right[

 <br><br>
Keanu Lim  
Charles Love  
Emma Ng  
Ryan Scholes  
Jiayu Shi 

**Evidence Action**  
Grace Hollister  
Grace Morgan

[BITSS](https://bitss.org) is part of the Center   
for Effective Global Action ([CEGA](https://cega.berkeley.edu/)).   
  ]]
 


---
count: false
# Table of Contents 
</br>
.font130[

1. [Introduction](#introduction)

2. [Demo](#demo)

3. [Lessons](#lessons)

]

---
count: false
# Table of Contents 
</br>
.font130[

1. [**Introduction**](#introduction)

2. [Demo](#demo)

3. [Lessons](#lessons)

]
 
---
name: motivation
background-image: url("Images/alternative-facts-crowd.png")
background-size: 800px
background-position: 0% 0% 



# Motivation: Rise of Alternative Facts

.pull-right[
<br>
<iframe width="360" height="250" src="https://www.youtube.com/embed/rV_YxKOE90g?start=188" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


*Interviewer:* “We I have looked at what economist are saying, and [...] there is no measurable evidence that people are staying at home because of [$600 unemp. insurance]” 

*Congressman:* “[scoffs] I don’t know which economist you are talking about, but ...” 
]

---

# Possible Mechanism: Opaqueness of Policy Analysis

.font140[
<br>
- Incredible Certitudes (Manski, 2013)  

- Report wars (Wesselink et al, 2013)
]
--
.font140[
- Parallels to "Reproducibility Crisis" and Open Science reponse (Hoces, Grant, Miguel 2020)  
  - Core principles for Open Policy Analysis (OPA) in outputs, analysis and materials (reproducibility)
  - Propose agenda to implement and document how OPA can be implemented into several policy issues
]

---

# Deworming Interventions 

## Describe DW  

## Describe future settings for DW 

## Describe Worm wars (mention similarity to other debates)

---
background-image: url(Images/opa_framework.svg)
background-size: 800px
background-position: 50% 0%
count:true
  
# A Framework for Open Policy Analysis
<br><br><br><br><br><br><br><br><br>
## Specific contritutions to deworming  
contribution: (1) Selected one PE among several alternatives and establish a clear link between PE and assumptions. (2) Added documentation to increase reproducibility/ (3) created a public repository with all materials for one-click reproducibility. 

---
count: false
# Table of Contents 
</br>
.font130[

1. [Introduction](#introduction)

2. [**Demo**](#demo)

3. [Lessons](#lessons)

]

???
write notes here

---
background-image: url(Images/dw-open-out3.png), url(Images/dw-open-out2.png), url(Images/dw-open-out1.png)  
background-size: 500px, 500px, 500px
background-position: 100% 80%, 70% 40%, 40% 0% 
# Open Output

.pull-left[
## [Demo](https://fhoces.shinyapps.io/shiny_app_test/)

<br>
## Main features
- One clear output  
previously agreed in   
consultation with  
policy partner
- Two additional tabs to modify assumtions  
(key assumptions and all assumtions)
- Each component is classified into research,   
data, or guesswork
- High level equations added to illustrate location of components
- Added feature to modify standar deviations
- Track values of each component

]


---

# Opaque Output

reference truman's one handed economist  
---
background-image: url(Images/dw-open-an2.png), url(Images/dw-open-an1.png) 
background-size: 400px, 400px
background-position: 100% 100%, 70% 0% 
# Open Analysis

.pull-left[
## [Demo](https://rpubs.com/fhoces/547979)

## Main features
- Complete narrative description of the methodology
- Translation of each narrative step into an equation
- Implementation of each equation into code
- Combine all of the above into using a dynamic document (RMarkdown)
- Presentation of narrative, equations, and code in layered fashion to avoid overwelming the reader
Icon figure  

]
---

# Opaque Analysis

reference rodrik quote on math for clarity

---
background-image: url(Images/dw-open-mat2.png), url(Images/dw-open-mat1.png) 
background-size: 400px, 400px
background-position: 100% 100%, 70% 0% 
# Open Materials

.pull-left[
## [Demo](https://github.com/BITSS-OPA/opa-deworming)

## Main features
- 5-click reproducible DD and app
- Extensive readme files
- Clear folder structure
- Version controlled
- Open data
- Acknowledgment to all contributors

]

---

# Opaque Materials

---
count: false
# Table of Contents 
</br>
.font130[

1. [Introduction](#introduction)

2. [Demo](#demo)

3. [**Lessons**](#lessons)

]

???
write notes here

---

# Useful practices developed during the project

Link between DD and App

Style guide  

---

# Lessons for future OPA projects

Revised timeline: 
1. Reviewed existing documentation  
2. Review code/spreadsheets and write down missing documentation. 
3. Add equations to reflect any additional clarifying steps. 
4. Translate analysis to open source software (or code scripts)  
5. Check for computational reproducibility and consult with original analysts for discrepancies/further questions
6. Discuss with policy partner on target policy estimate
7. Draft doodle of app 
8. Incorporate new analysis (repeat steps 1 - 3) 
9. Present draft of OPA (DD and doodle of app) to policy partner
10. Incorporate comments into v1.0 of the OPA
11. Build app based on analysis of dynamic document 
12. Incorporate any additional features requested by policy partner
13. Verify that all three components produce the same output
14. Publish v1.0





---

# Additional Benefits of OPA 

## Easy to update or reuse  

## Clearer connection of how evidence from research is used in policy analysis

## MAYBE connect with forecasting


```{r gen_pdf, include = FALSE, cache = FALSE, eval = FALSE}
pagedown::chrome_print("01_slides.html", 
                       output = paste0(Sys.Date(), "01_slides.pdf") )
```